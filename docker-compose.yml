# services:
#   app:
#     image: node:18
#     volumes:
#       - ./:app
#     working_dir: ./app
#     command: npm run start
#     build: .
#     ports:
#       - "3000:3000"
#     environment:
#       - PORT=3000
#       - DB_HOST=db
#       - DB_PORT=5432
#       - DB_USERNAME=postgres
#       - DB_PASSWORD=yourpassword
#       - DB_NAME=prometheus_demo
#     depends_on:
#       - db

#   db:
#     image: postgres:13
#     environment:
#       - POSTGRES_USER=postgres
#       - POSTGRES_PASSWORD=yourpassword
#       - POSTGRES_DB=prometheus_demo
#     ports:
#       - "5432:5432"
#     volumes:
#       - db_data:/var/lib/postgresql/data

#   prometheus:
#     image: prom/prometheus
#     volumes:
#       - ./prometheus.yml:/etc/prometheus/prometheus.yml
#     ports:
#       - "9090:9090"
#     depends_on:
#       - app

#   grafana:
#     image: grafana/grafana
#     ports:
#       - "3001:3000"  # Changed to avoid conflict with app
#     depends_on:
#       - prometheus

# volumes:
#   db_data:

version: "3.8"
services:
  prometheus:
    image: prom/prometheus
    container_name: prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"

  grafana:
    image: grafana/grafana
    container_name: grafana
    ports:
      - "3000:3000"
    depends_on:
      - prometheus
